package enc

import (
	"github.com/stretchr/testify/require"
	"testing"
)

var encoderTests = [][]byte{
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014\015\016\017"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014\015\016"),
	[]byte("\001\002\377"),
	[]byte("\001\002"),
	[]byte("\001\002\377\377"),
	[]byte("\001\002\003\004\005"),
	[]byte("\001\002\003\004\005\006"),
	[]byte("\001\002\003\004\005\006\007"),
	[]byte("\001\002\003\004\005\006\007\010"),
	[]byte("\001\002\003\004\005\006\007\010\011"),
	[]byte("\001\002\003\004\005\006\007\010\011\012"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014\015"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014\015\016\017\020"),
	[]byte("\001\002\003\004\005\006\007\010\011\012\013\014\015\016\017\020"),
	[]byte("\000\000\000\000\377\377\377\377\125\125\125\125\252\252\252\252" +
		"\201\143\310\322\307\174\262\027\137\117\316\311\111\055\122\041" +
		"\141\251\161\040\045\263\006\163\346\330\104\060\171\120\127\277"),
	[]byte(""),
	[]byte("\001"),
}

func Test_Base32Encoder(t *testing.T) {
	for _, encoderTest := range encoderTests {
		encoder := Base32Encoder{}
		encoded := encoder.Encode(encoderTest)
		require.NotContains(t, encoded, "=")
		require.NotContains(t, encoded, ".")
		decoded, err := encoder.Decode(encoded)
		require.NoError(t, err)
		require.Equal(t, encoderTest, decoded)
	}
}
